$PREF: 'o-table';

// ## TABLE CONTAINER

##{$PREF}-ctr {
  background-color: white;
  border: 1px $gray-5 solid;
  border-radius: $xs;
  max-height: 65vh;
  overflow: scroll;
  position: relative;
}

// ## TABLE CONTENT

.#{$PREF} {
  border-collapse: collapse;
  border-spacing: $xs $xxs;
  height: fit-content;
  min-width: 100%;
  transform: rotateX(0deg);
  width: max-content;
}

// ## TABLE CELL (BOTH TH AND TD)

.#{$PREF}-cell {
  margin: 0;
  padding: $sm $md $sm $sm;
  position: sticky;
  text-align: left;

  &--xs { max-width: $xxl * 2.5; width: $xxl * 2.5; }
  &--sm { max-width: $xxl * 3.25; width: $xxl * 3.25; }
  &--md { max-width: $xxl * 4; width: $xxl * 4; }
  &--lg { max-width: $xxl * 5; width: $xxl * 5; }

  &:first-child > div { @extend .f; @extend .f-ac; max-width: 100%; }
  &:last-child { width: -webkit-fill-available; }
}

// ## SELECT CHECKBOX - The HTML applied the .c-misc-checkbox class, we don't
// extend it in here for overriding purposes of the margin and background-color.

.#{$PREF}-select { background-color: inherit; margin: 0 $lg 0 0; }

// ## COLUMN PANEL

// Added a div before the name to make it take higher precedence.
div.#{$PREF}-col-panel { padding: $sm; }
.#{$PREF}-col-panel > form { margin-bottom: $sm; }
.#{$PREF}-col-panel > button {
  @extend .f;
  @extend .f-ac;

  justify-content: left;
  padding: $xs 0;
  width: 100%;

  @include PRIMARY_HOVER;
}

.#{$PREF}-col-panel > button:first-of-type { margin-bottom: $xs; }

.#{$PREF}-col-panel > button > svg { margin-right: $xs; }

.#{$PREF}-col-panel-button--active > svg,
.#{$PREF}-col-panel-button--active > p { color: $primary; }

.#{$PREF}-col-panel > form > .o-form-item {
  margin-bottom: $sm;
  margin-top: 0;
}

// ## TABLE QUICK FILTER

.#{$PREF}-quick-filter {
  @extend .f;
  @extend .f-ac;
  @extend .meta;

  background-color: $primary-bg;
  border: 1px rgba($color: $primary-hex, $alpha: 0.3) solid;
  border-radius: $sm;
  margin-right: $xxs;
  padding: 6px;
  text-align: left;
  width: max-content;

  &--active { background-color: $primary; color: white; }
}

// ## TABLE ACTION

.#{$PREF}-action {
  background-color: $gray-5;
  border-radius: $xxs;
  height: $lg;
  width: $lg;

  // !important overrides the normal .c-btn styling for hover state.

  @include HOVER { opacity: 1 !important; }

  &--demote { &::before { margin-left: -$xxs; } }
  &--promote { @extend .tooltip--right; &::before { margin-right: -44px; } }
  &--delete > svg { color: $red; }
  &--disabled > svg { color: $gray-3; }

  > svg { @extend .react-icon--lg; }
}

// For all buttons that are not the Promote to Admin button, we set the tooltip
// to be to the right side of the icon.
:not(a) > .#{$PREF}-action { &:last-of-type { @extend .tooltip--right; } }

// ## TABLE FILTER

.#{$PREF}-filter-active-tag {
  > div:last-child {
    @extend .flex-acc;
    @extend .meta;

    background-color: $primary;
    border: 2px white solid;
    border-radius: 50%;
    color: white;
    left: -$sl;
    position: absolute;
    top: -$ss;
    z-index: 12;

    @include SIZE(24px);
  }
}

.#{$PREF}-filter-row {
  margin-bottom: $sm;

  // Join operator: WHERE, AND, OR.
  > *:first-child { flex: 1; }

  // Contains main dropdowns/input for filter.
  > *:nth-child(2) {
    flex: 4;

    > *:nth-child(1) { max-width: 200px; min-width: 200px; }
    > *:nth-child(2) { max-width: 100px; min-width: 100px; }
    > *:nth-child(3) { max-width: 200px; min-width: 200px; }
    > button:nth-child(4) { > svg { color: $red; } }
  }
}
